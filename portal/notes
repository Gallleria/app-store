TO SEED DATA USE FOLLOWING COMMANDS
=data -build-file /=portal=/sur/portal/data/hoon
=lib -build-file /=portal=/lib/portal/hoon
=general :*
title='Title'
link='https://www.google.com/maps'
description='This is a desctription.'
tags=~['tag1' 'tag2' 'tag3']
properties=*(map @t @t)
pictures=~['https://toptyr-bilder.nyc3.cdn.digitaloceanspaces.com/mona_og_smaller.png' 'https://toptyr-bilder.nyc3.cdn.digitaloceanspaces.com/mona_og.png']
image='https://toptyr-bilder.nyc3.cdn.digitaloceanspaces.com/mona_og_smaller.png'
color='#e8e8e8'
==

ADD OTHER AND APP (spam to get lot of items)
:portal-manager|add [our [%enditem %other ~] general [%enditem-other ~]]
:portal-manager|add [our [%enditem %app ~] general [%enditem-app '~nec/portal']]

SCRIES (needs to be updated)
.^(item:data %gx /=portal-store=/0/~zod/curator-page/~2000.1.1/item)
.^(pointer-set:data %gx /=portal-store=/all/pointers/pointer-set)
.^(nested-all-items:conv:lib %gx /=portal-store=/all/nested/nested-all-items)
.^(all-items:conv:lib %gx /=portal-store=/all/items/all-items)
.^(? %gx /=portal-store=/valid/latest/0/~zod/curator-page/~2000.1.1/noun)

TESTING
- BOOTAT NEKOLIKO MJESECA ASAP, I TESTIRAT NA LIVE NETWORKU

SCRYS/SUBS
- vidjet dii ih sve zovem i vidjet kad crashaju. handleat crashove bolje? jel se mogu handleat?
( to ukljucuje sve !! i sve ?> i ?<)

GROUPS
autojoin groups, uqbar code

ASSERTIONS/SPECIFIC TYPES
- how to add a default/bunt value in the data type? (we should add it for color, see where else. where for bespoke?)
- how to look for e.g. ships(for curators and other things)/groups canonical pointer or canonical title?
-
%curator type za subscribing, so other curs can be recommended
how to recommend other curator pages in lists? will it mess things up with subs?
->  better to recommend just curator ship, so that you dont automatically fetch the curator page and everything? (for now)

ARCH
- remove extra files which come from base

ERROR HANDLING?
 - what happens if scries fail? (look where they are all used)
 - make sre you dont !!, but return sth like ~
 - find all !!, and make it not crash but handle it



TODO LATER
 - purges on a daily/weekly basis or sth
 - TODO printove popravit u portal storeu/manageru i u libu da da kazu title a ne samo pointer
   tj da budu i na vise mjesta di trebaju bit (pomoc ce za debugging kad ljudi krenu koristit)
 - make cards from portal.hoon, and almost dont use any from portal-manager/portal-store explicitly
   or is that less clear? or more clear?
- validation is only for apps

=groups-list [%group ~[[%.n ~dilryd-mopreg 'app-store' %group] [%.n ~toptyr-bilder 'random-group' %group] [%.n ~doplyr-harbur 'hacker-house']]]


::  doesnt work
ADD MIXED LIST FROM ALL ITEMS (except curator page and validity store)
:portal-manager|make-all-list



mock item:
[ ~zod
  'item'
  %other
  [%other ~]
  'item.link'
  'some description'
  ~['tag1' 'tag2' 'tag3']
  (malt (limo ~[['hoon' 'awesome'] ['wut' 'zap']]))
  *comments:sur
  *ratings:sur
  *reviews:sur
  ~['pic-link1' 'pic-link2']
  'image-link'
  '#e4eaef'
  *created-at:sur
  *updated-at:sur
  *signature:sur
  [%public ~]
  =price
]

_____

::  is it worth using path format of the pointer everywhere instead of the cell?

::but it'd be useful to get all the ships someone follows, and from there, get all the items from those ships

::  FAQ za data types

::  TODO  annotate code everywhere with comments

::  should bespoke-read only read bespoke-data?
::  or should it be able to interpret the whole item based on its type?
::  whole item is better
::++  bespoke-read
::  |=  [=item]
::  ^-  what should it output???
::

::  how to separate type layer
::  SECURITY  ??

::  - a default peer which we monitor to see the growth of the size and number items, and if we should do sth

::  POINTER parsing rules:
::
::    if =(points-to-item %.n)
::  %app  ->  (weld (weld (scow %p ship) "/") (trip title))  ->  ~zod/app-name
::  %group  ->  (weld (weld (scow %p ship) "/") (trip title))  ->  ~zod/group-name
::  %ship  ->  ship  ->  ~zodÅ¾
::  depending on type, q has different meaning
::
::    if =(points-to-item %.y)
::  you can find any item in the global portal namespace with the pointer
::  (assuming right permissions)
::  q means time created-at
::
::
::  ITEM parsing rules:
::
::    if =(type %app)
::  link  ->  distributor desk
::  pictures  ->  screenshots
::  reviews  ->  hash should be compared to hash.docket.bespoke-data
::  name  ->  should be same as in desk


::  (is necessary?)curator can only add apps with valid sigs to app list (whether its %curator-page or %list)?
::  curator can only put apps which are properly validated into another list? (or that doesnt matter and it should be validated locally by any person)

::  item versioning?

::  auto item update (dev-server subbed to dst-server)??


Whatever you add is auto added to your collection (cur=dev)?

how to follow a curator? (e.g. you can find their default %curated easily just by their @p because you know it's '~2000.1.1'

version control such that curator recommends a specific version of it
curator should unrecommend something if it updates?

Curator subs to dev's cur page (change name), receives a list of his items from which he can choose what he puts on his on cur page

extra command for practicality: add pointer to list-of-pointers when you want (so it's like edit item, but specific to the item type)
- in different situations, e.g. auto add a pointer, for all received data for example

specificna mapa/lista itema koji su prikazani? (ako zelis neki hopping algo u buducnosti mozemo)

eventually we want to add "price" property to items.
